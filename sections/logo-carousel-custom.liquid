{% schema %}
{
  "name": "Logo carousel",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Couleur fond", "default": "#ffffff" },
    { "type": "range", "id": "carousel_width", "label": "Largeur (%)", "min": 60, "max": 100, "step": 5, "default": 100 },
    { "type": "range", "id": "speed", "label": "Vitesse (sec)", "min": 10, "max": 70, "step": 5, "default": 30 },
    { "type": "range", "id": "gap", "label": "Espace (px)", "min": 10, "max": 80, "step": 5, "default": 40 },
    { "type": "checkbox", "id": "pause_on_hover", "label": "Pause au survol", "default": true }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        { "type": "image_picker", "id": "logo", "label": "Image logo" },
        {
          "type": "range",
          "id": "logo_height",
          "label": "Taille logo (px)",
          "min": 20,
          "max": 220,
          "step": 2,
          "default": 70
        },
        {
          "type": "range",
          "id": "logo_opacity",
          "label": "Opacit√©",
          "min": 40,
          "max": 100,
          "step": 5,
          "default": 85
        }
      ]
    }
  ],
  "presets": [
    { "name": "Logo carousel" }
  ]
}
{% endschema %}

<div class="lc-wrap" style="background: {{ section.settings.bg_color }};">
  <div class="lc-inner" style="max-width: {{ section.settings.carousel_width }}%;">

    <div class="lc-track" aria-label="Logo carousel">
      {% for block in section.blocks %}
        {% if block.settings.logo != blank %}
          <div class="lc-item" {{ block.shopify_attributes }}>
            <img
              src="{{ block.settings.logo | image_url: width: 800 }}"
              style="height: {{ block.settings.logo_height }}px; opacity: {{ block.settings.logo_opacity | divided_by: 100.0 }};"
              loading="lazy"
              alt=""
            >
          </div>
        {% endif %}
      {% endfor %}

      {% for block in section.blocks %}
        {% if block.settings.logo != blank %}
          <div class="lc-item">
            <img
              src="{{ block.settings.logo | image_url: width: 800 }}"
              style="height: {{ block.settings.logo_height }}px; opacity: {{ block.settings.logo_opacity | divided_by: 100.0 }};"
              loading="lazy"
              alt=""
            >
          </div>
        {% endif %}
      {% endfor %}
    </div>

  </div>
</div>

<style>
  .lc-wrap{ padding: 28px 0; overflow: hidden; }
  .lc-inner{ margin: 0 auto; overflow: hidden; }
  .lc-track{
    display:flex;
    align-items:center;
    gap: {{ section.settings.gap }}px;
    width:max-content;
    animation: lc_scroll linear infinite;
    animation-duration: {{ section.settings.speed }}s;
    will-change: transform;
  }
  .lc-item{ flex: 0 0 auto; display:flex; align-items:center; justify-content:center; }
  .lc-item img{
    width:auto;
    display:block;
    transition: transform .25s ease, opacity .25s ease;
  }
  .lc-item img:hover{ transform: scale(1.05); opacity: 1 !important; }

  @keyframes lc_scroll{
    from { transform: translateX(0); }
    to   { transform: translateX(-50%); }
  }

  {% if section.settings.pause_on_hover %}
  .lc-wrap:hover .lc-track{ animation-play-state: paused; }
  {% endif %}

  @media (max-width: 768px){
    .lc-wrap{ padding: 18px 0; }
  }
</style>